LINK_DIRECTORIES( ${OPENSYNC_LIBRARY_DIRS} ${GLIB2_LIBRARY_DIRS} ${LIBXML2_LIBRARY_DIRS} )
INCLUDE_DIRECTORIES( ${OPENSYNC_INCLUDE_DIRS} ${GLIB2_INCLUDE_DIRS} ${LIBXML2_INCLUDE_DIRS} ${CURL_INCLUDE_DIRS} )

SET( opie_format_SRCS
opie_format.c
opie_xml_utils.c
)

SET( opie_sync_SRCS
opie_sync.c
opie_qcop.c
opie_comms.c
opie_xml.c
opie_xml_utils.c
md5.c
)

OPENSYNC_FORMAT_ADD( opie ${opie_format_SRCS} )
OPENSYNC_PLUGIN_ADD( opie-sync ${opie_sync_SRCS} )

TARGET_LINK_LIBRARIES( opie ${OPENSYNC_LIBRARIES} ${LIBXML2_LIBRARIES} ${GLIB2_LIBRARIES} )
TARGET_LINK_LIBRARIES( opie-sync ${OPENSYNC_LIBRARIES} ${CURL_LIBRARIES} ${LIBXML2_LIBRARIES} ${GLIB2_LIBRARIES} )

###### INSTALL ################### 
OPENSYNC_FORMAT_INSTALL( opie )
OPENSYNC_PLUGIN_INSTALL( opie-sync )

OPENSYNC_PLUGIN_CONFIG( opie-sync )

