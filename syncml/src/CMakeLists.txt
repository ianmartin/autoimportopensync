INCLUDE_DIRECTORIES(${OPENSYNC_INCLUDE_DIR} ${GLIB2_INCLUDE_DIRS} ${LIBXML2_INCLUDE_DIRS} ${LIBSYNCML_INCLUDE_DIRS})

SET(SOURCE_FILES syncml_plugin.c syncml_common.c syncml_devinf.c)

IF (ENABLE_OBEX)
	SET(SOURCE_FILES ${SOURCE_FILES} syncml_obex_client.c)
ENDIF (ENABLE_OBEX)

IF (ENABLE_HTTP)
	SET(SOURCE_FILES ${SOURCE_FILES} syncml_http_client.c syncml_http_server.c)
ENDIF (ENABLE_HTTP)

OPENSYNC_PLUGIN_ADD(syncml-plugin ${SOURCE_FILES})

TARGET_LINK_LIBRARIES(syncml-plugin ${OPENSYNC_LIBRARIES} ${LIBSYNCML_LIBRARIES} ${GLIB2_LIBRARIES} ${LIBXML2_LIBRARIES})

###### INSTALL ###################
OPENSYNC_PLUGIN_INSTALL(syncml-plugin)

IF (ENABLE_OBEX)
	OPENSYNC_PLUGIN_CONFIG(syncml-obex-client)
ENDIF (ENABLE_OBEX)

IF (ENABLE_HTTP)
	OPENSYNC_PLUGIN_CONFIG(syncml-http-server)
	OPENSYNC_PLUGIN_CONFIG(syncml-http-client)
ENDIF (ENABLE_HTTP)
