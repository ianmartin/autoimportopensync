INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_BINARY_DIR} ${CHECK_INCLUDE_DIR} ${OPENSYNC_INCLUDE_DIR} ${GLIB2_INCLUDE_DIRS} )

########### support #################	
ADD_DEFINITIONS( -DOPENSYNC_FORMATSDIR="\\\"${OPENSYNC_FORMATSDIR}\\\"" )

ADD_LIBRARY( support SHARED support.c )
TARGET_LINK_LIBRARIES( support opensync ${CHECK_LIBRARIES} ${OPENSYNC_LIBRARIES} ${GLIB2_LIBRARIES} )

ADD_LIBRARY( conversion SHARED conversion.c )
TARGET_LINK_LIBRARIES( conversion opensync ${CHECK_LIBRARIES} ${OPENSYNC_LIBRARIES} ${GLIB2_LIBRARIES} )

############ unit tests ##########################	

SET( TEST_TARGET_LIBRARIES support conversion )

OPENSYNC_ADD_TEST( vcard check_vcard.c ${TEST_TARGET_LIBRARIES}  )
OPENSYNC_ADD_TEST( vevent check_vevent.c ${TEST_TARGET_LIBRARIES} )
OPENSYNC_ADD_TEST( vnote check_vnote.c ${TEST_TARGET_LIBRARIES} )
OPENSYNC_ADD_TEST( vtodo check_vtodo.c ${TEST_TARGET_LIBRARIES} )

