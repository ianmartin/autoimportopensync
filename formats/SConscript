Import('*')

env.Append( CPPPATH = '.' )

# The basic plugins

file = env.SharedLibrary('file', ['file.c'], LIBS = ['opensync'], LIBPATH = '#opensync')
data = env.SharedLibrary('data', ['data.c'], LIBS = ['opensync'], LIBPATH = '#opensync')
contact = env.SharedLibrary('contact', ['contact.c'], LIBS = ['opensync'], LIBPATH = '#opensync')

# The vcard support library

vcard = env.SharedLibrary('opensync-vcard', ['vformats-xml/vformat.c'], LIBS = ['opensync'], LIBPATH = '#opensync')

# The xml formats

xmlvcard = env.SharedLibrary('xml-vcard', ['vformats-xml/xml-vcard.c'], LIBS = ['opensync', 'opensync-vcard'], LIBPATH = ['#opensync', '.'])
xmlformatvcard = env.SharedLibrary('xmlformat-vcard', ['vformats-xml/xmlformat-vcard.c'], LIBS = ['opensync', 'opensync-vcard'], LIBPATH = ['#opensync', '.'])

env.Install(install_format, file)
env.Install(install_format, data)
env.Install(install_format, contact)
env.Install(install_format, xmlvcard)
env.Install(install_format, xmlformatvcard)
env.Install(install_inc + '/opensync-1.0/opensync/', 'file.h')
env.Install(install_lib, vcard)
env.Alias('install', install_prefix)
