Import('*')

env.Append( CPPPATH = '.' )

# The basic plugins

file = env.SharedLibrary('file', ['file.c'], LIBS = ['opensync'], LIBPATH = '#opensync')
data = env.SharedLibrary('data', ['data.c'], LIBS = ['opensync'], LIBPATH = '#opensync')

contact = env.SharedLibrary('contact', ['contact.c'], LIBS = ['opensync'], LIBPATH = '#opensync')
event = env.SharedLibrary('event', ['event.c'], LIBS = ['opensync'], LIBPATH = '#opensync')


# The vformat support library
vformat = env.SharedLibrary('opensync-vformat', ['vformats-xml/vformat.c'], LIBS = ['opensync'], LIBPATH = '#opensync')

# The xml formats

xmlformatvcard = env.SharedLibrary('xmlformat-vcard', ['vformats-xml/xmlformat-vcard.c'], LIBS = ['opensync', 'opensync-vformat'], LIBPATH = ['#opensync', '.'])
xmlformatvcal = env.SharedLibrary('xmlformat-vcal', ['vformats-xml/xmlformat-vcal.c'], LIBS = ['opensync', 'opensync-vformat'], LIBPATH = ['#opensync', '.'])


env.Install(install_format, file)
env.Install(install_format, data)
env.Install(install_format, contact)
env.Install(install_format, event)
env.Install(install_format, xmlformatvcard)
env.Install(install_format, xmlformatvcal)
env.Install(install_inc + '/opensync-1.0/opensync/', 'file.h')
env.Install(install_lib, vformat)
env.Alias('install', install_prefix)
